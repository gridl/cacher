cacher
======

Awesome caching module for python.

# Usage

1. import the cacher:
	```import cacher
	```

2. wrap a function
	```@cacher.wrap(autosave = True)
	def some_long_function(n):
	  pass
	```

3. Call the function!
	```some_long_function(1) # takes forever!!!
	some_long_function(1) # super fast!!!
	some_long_function(2) # takes forever!!!
	some_long_function(2) # super fast!!!
	```

4. If needed, you can get at the original function by doing:
	```some_long_function.wrapped_func(1) # takes forever!!!
	```

# Options

Several options can be passed to the wrap function:

- module\_id: override the module name for the cache filename with the provided string
- name: override the function name for the cache filename with the provided string
- each: if True, append a hash of the function arguments to the cache filename. This creates a separate cache file for each set of parameters passed to the program (useful when your result is quite large, or when you're multithreading). Default is False.
- cacheid: override the cacheid with the provided string. Default is the hash of the function code.
- versioned: if True, append the cacheid to the cache filename. Default is False.
- autosave: if True, automatically save the cache every time a new entry is added. Default is False.
- disk: if True, save the cache to disk. Default is True.

# Advanced features

## cache subdirectories

Sometimes, for various reasons, you might want to have seperate unrelated caches for the same project. This is facilitated by subdirectories:

```@cacher.wrap(cacheid = "something", module_id = "woo")
def zomg(a):
  pass

zomg(1) # would be cached in cached/woo.zomg%something.p

cacher.push_subdir("sub1") # the dirstack would be "" and the current dir would be "sub1"
zomg(1) # would be cached in cached/sub1/woo.zomg%something.p

cacher.push_subdir("sub2") # the dirstack would be "", "sub1" and the current dir would be "sub2"
zomg(1) # would be cached in cached/sub2/woo.zomg%something.p

cacher.pop_subdir() # the dirstack would be "" and the current dir would be "sub1"
zomg(1) # would be cached in cached/sub1/woo.zomg%something.p

cacher.set_subdir("sub3") # the dirstack would be "" and the current dir would be "sub3"
zomg(1) # would be cached in cached/sub3/woo.zomg%something.p

cacher.pop_subdir()
zomg(1) # would be cached in cached/woo.zomg%something.p
```

Every time a directory change takes place, the cacher flushes all the caches that have changed (and are not set to disk=False) out to disk.

# Bugs

- no easy class method support
- currently, the key for the arguments is generated by doing "(str(args), str(kwargs))". This has several problems:
	- things such as sets don't always str() to the same string in terms of order
	- it's slow
- the code is not extremely readable
